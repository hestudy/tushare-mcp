# Risk Profile: Story 1.1

Date: 2025-09-29
Reviewer: Quinn (Test Architect)

## Executive Summary
- **Total Risks Identified:** 5
- **Critical Risks:** 0
- **High Risks:** 3
- **Risk Score:** 70/100

## Critical Risks Requiring Immediate Attention
目前无评分为 9 的关键风险；最高风险等级为高风险（分值 6）。

## Risk Distribution

### By Category
- **Security:** 1 项（高风险 1）
- **Technical:** 1 项（高风险 1）
- **Operational:** 2 项（高风险 1， 中风险 1）
- **Performance:** 1 项（中风险 1）
- **Business/Data:** 0 项

### By Component
- **Backend:** 2 项
- **Infrastructure / CI:** 1 项
- **Configuration & Secrets:** 1 项
- **Documentation & Enablement:** 1 项

## Detailed Risk Register

| Risk ID   | Category    | Description | Probability | Impact | Score | Priority | Mitigation Strategy | Residual Risk |
|-----------|-------------|-------------|-------------|--------|-------|----------|---------------------|---------------|
| TECH-001 | Technical   | 目录骨架手工创建可能偏离架构定义，导致后续模块集成冲突 | Medium (2) | High (3) | 6 | High | 编写脚手架脚本或复制架构模板，CI 中加入目录结构校验 | Medium |
| OPS-001  | Operational | 首次 CI 流程需安装 Ruff/Black/Pytest 等依赖，若缺少缓存或配置会导致流水线持续失败 | High (3) | Medium (2) | 6 | High | 在仓库提供 `requirements-dev.txt`/`poetry` 锁定版本，CI 预热缓存并记录执行文档 | Medium |
| SEC-001  | Security    | `shared/config/` 中的 Tushare Token 钩子若未安全管理，易出现凭证泄露 | Medium (2) | High (3) | 6 | High | 使用环境变量 + `.env.example` 指引，并在 CI 中配置机密扫描；文档强调不得提交明文 | Low |
| PERF-001 | Performance | FastAPI/uvicorn 启动参数若配置不当（单 worker、缺乏心跳），会在后续并发下出现吞吐瓶颈 | Medium (2) | Medium (2) | 4 | Medium | 在 README 与 Makefile 中默认配置多 workers + 健康探针，预留负载测试脚本 | Medium |
| OPS-002  | Operational | README 若缺少启动命令、依赖安装与常见问题指引，将降低新成员接入效率 | Medium (2) | Medium (2) | 4 | Medium | 提供逐步启动指南、常见故障排查表，并指向后续故事/模块位置 | Low |

## Risk-Based Testing Strategy

### Priority 1: Critical Risk Tests
- 当前无关键风险；聚焦于高风险项的预防性测试。

### Priority 2: High Risk Tests
- **TECH-001:** 编写结构一致性测试（例如使用脚本验证目录与占位文件）。
- **OPS-001:** 在 CI 中添加管道验收测试，包含依赖安装、Lint、单测的冷启动执行。
- **SEC-001:** 添加凭证扫描、配置读取单测以及最小权限检查，确保密钥通过环境变量注入。

### Priority 3: Medium/Low Risk Tests
- **PERF-001:** 准备并发基准测试脚本，确保默认配置可支撑预期请求；在 `pytest` 中加入健康检查响应时间断言。
- **OPS-002:** 将 README 步骤纳入 QA 检查清单，验证新成员按文档能成功启动服务与运行测试。

## Risk Acceptance Criteria
- **必须修复后上线：** 所有高风险项需在合入主分支前明确缓解措施（脚手架、CI 配置、安全策略）。
- **可带缓解上线：** 中风险项可在具备监控与验证的情况下上线，但需记录后续跟进任务。
- **接受风险：** 当前无被接受的风险；若团队决定接受，需获得 Tech Lead 签署并记录在 QA Gate。

## Monitoring Requirements
- 为 OPS-001 配置 CI 成功率仪表板与失败告警。
- 针对 SEC-001，启用密钥扫描与凭证审计日志。
- 对 PERF-001 监控 uvicorn worker CPU/内存及响应时间。
- 对 OPS-002 维护文档更新流程，确保每次架构调整同步 README。

## Risk Review Triggers
- 架构或目录结构调整。
- 新增 CI 阶段或依赖。
- 密钥管理策略变更或发现凭证事故。
- 预发布或生产环境出现性能/稳定性警报。

---
Risk profile: qa.qaLocation/assessments/1.1-risk-20250929.md
